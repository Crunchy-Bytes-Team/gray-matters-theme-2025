<div style='background:#ce71ed' class='text-white text-xs text-center py-1'>
  {% render 'announcements' %}
  SPEDIZIONI GRATUITE E DAZI PREPAGATI
</div>
<header class='bg-white px-4 h-12 flex flex-row items-center fixed top-8 left-0 right-0 z-50' data-site-header>
  <div class='w-full flex flex-row justify-between bg-white h-full items-center'>
    <!-- hamburger -->
    <div class='flex lg:hidden w-2/12 items-start'>
      <button
        type='button'
        aria-label='Apri menu'
        class='p-2 text-black hover:opacity-70 transition-opacity duration-200 ease-out'
        data-open-mobile-menu
      >
        <i class='fa-solid fa-bars text-xl' aria-hidden='true'></i>
      </button>
    </div>
    <!-- logo -->
    <div class='flex flex-row justify-center w-10/12 lg:w-auto'>
      <a
        href='{{  routes.root_url }}'
        class='site-header__logo-image{% if section.settings.align_logo == 'center' %} site-header__logo-image--centered{% endif %}'
      >
        <img
          src='/cdn/shop/files/logo_d372fcc9-f883-42eb-be88-ef6796c08b5b_180x.png?v=1614331262'
          width='180'
          height='60'
          alt='{{ shop.name }} logo'
        >
      </a>
    </div>
    <!-- menu + icons -->
    <div class='flex flex-row items-end h-full w-2/12 lg:w-auto'>
      <!-- menu -->
      <nav class='hidden lg:flex flex-row items-center justify-center gap-1 text-black mr-10 h-full'>
        <div class='relative group h-full'>
          <a
            href='{{ routes.collections_url }}'
            class='h-full inline-flex items-center px-7 hover:opacity-70 hover:bg-gray-200 group-hover:bg-gray-200 transition-all duration-200 ease-out proxima-reg text-sm tracking-wider uppercase text-dark-gray'
            >Collection</a
          >
          {% assign collection_menu = linklists.collection %}
          {% if collection_menu != blank and collection_menu.links != blank %}
            <div class='absolute left-0 top-full mt-0 hidden group-hover:block group-focus-within:block z-50'>
              <ul class='min-w-[200px] bg-gray-100 text-black py-2'>
                {% for link in collection_menu.links %}
                  <li>
                    <a
                      href='{{ link.url }}'
                      class='block px-4 py-2 proxima-reg text-sm tracking-wider uppercase hover:opacity-70 transition-opacity text-dark-gray'
                    >
                      {{- link.title | escape -}}
                    </a>
                  </li>
                {% endfor %}
              </ul>
            </div>
          {% endif %}
        </div>

        {% if localization.available_languages and localization.available_languages.size > 1 %}
          <div class='relative group h-full'>
            <a
              href='/pages/select-language'
              class='h-full inline-flex items-center px-7 hover:opacity-70 hover:bg-gray-200 group-hover:bg-gray-200 transition-all duration-200 ease-out proxima-reg text-sm tracking-wider uppercase text-dark-gray'
              aria-haspopup='true'
              >Select language</a
            >
            <div class='absolute left-0 top-full mt-0 hidden group-hover:block group-focus-within:block z-50'>
              <ul class='min-w-[200px] bg-gray-100 text-black py-2 shadow-lg'>
                {% for language in localization.available_languages %}
                  <li>
                    {% if language.iso_code == localization.language.iso_code %}
                      <span
                        class='block px-4 py-2 proxima-reg text-sm tracking-wider uppercase cursor-default font-semibold text-dark-gray'
                      >
                        {{ language.endonym_name | default: language.name }}
                      </span>
                    {% else %}
                      <a
                        href='{{ language.root_url }}'
                        hreflang='{{ language.iso_code }}'
                        class='block px-4 py-2 proxima-reg text-sm tracking-wider hover:opacity-70 transition-opacity text-dark-gray'
                      >
                        {{ language.endonym_name | default: language.name }}
                      </a>
                    {% endif %}
                  </li>
                {% endfor %}
              </ul>
            </div>
          </div>
        {% else %}
          <a
            href='/pages/select-language'
            class='h-full inline-flex items-center px-7 hover:opacity-70 hover:bg-gray-200 transition-all duration-200 ease-out proxima-reg text-sm tracking-wider uppercase text-dark-gray'
            >Select language</a
          >
        {% endif %}

        <div class='relative group h-full'>
          <a
            href='/pages/client-service'
            class='h-full inline-flex items-center px-7 hover:opacity-70 hover:bg-gray-200 group-hover:bg-gray-200 transition-all duration-200 ease-out proxima-reg text-sm tracking-wider uppercase text-dark-gray'
            aria-haspopup='true'
            >Client Service</a
          >
          <div class='absolute left-0 top-full mt-0 hidden group-hover:block group-focus-within:block z-50'>
            <div class='min-w-[200px] bg-gray-100 text-black py-2 shadow-lg'>
              <a
                href='mailto:hello@graymattersnyc.com'
                class='flex items-center gap-2 px-4 py-2 proxima-reg text-xs tracking-wider hover:opacity-70 transition-opacity text-dark-gray'
              >
                <i class='fa-solid fa-envelope text-gray-400' aria-hidden='true'></i>
                <span>Email</span>
              </a>
              <a
                href='tel:+19292950303'
                class='flex items-center gap-2 px-4 py-2 proxima-reg text-xs tracking-wider hover:opacity-70 transition-opacity text-dark-gray'
              >
                <i class='fa-solid fa-phone text-gray-400' aria-hidden='true'></i>
                <span>+1 929 295 0303</span>
              </a>
              <span class='block px-4 py-1 proxima-reg text-xs tracking-wider text-gray-600'>
                Lun-Ven 10.00 - 18.00 EST
              </span>
              <div class='w-full px-4'>
                <div class='border-t border-gray-300 mt-4 mb-2'></div>
              </div>
              <a
                href='#'
                class='block px-4 py-2 proxima-reg text-xs tracking-wider uppercase hover:opacity-70 transition-opacity text-dark-gray'
              >
                spedizioni e resi
              </a>
              <a
                href='#'
                class='block px-4 py-2 proxima-reg text-xs tracking-wider uppercase hover:opacity-70 transition-opacity text-dark-gray'
              >
                FAQ
              </a>
              <a
                href='#'
                class='block px-4 py-2 proxima-reg text-xs tracking-wider uppercase hover:opacity-70 transition-opacity text-dark-gray'
              >
                cura delle scarpe
              </a>
              <a
                href='#'
                class='block px-4 py-2 proxima-reg text-xs tracking-wider uppercase hover:opacity-70 transition-opacity text-dark-gray'
              >
                stampa
              </a>
              <a
                href='#'
                class='block px-4 py-2 proxima-reg text-xs tracking-wider uppercase hover:opacity-70 transition-opacity text-dark-gray'
              >
                ladygrayu club
              </a>
              <a
                href='#'
                class='block px-4 py-2 proxima-reg text-xs tracking-wider uppercase hover:opacity-70 transition-opacity text-dark-gray'
              >
                brand stories
              </a>
            </div>
          </div>
        </div>
      </nav>
      <!-- icons -->
      <div class='flex items-center justify-end gap-0 lg:gap-8 text-black h-full w-full lg:w-auto'>
        <a
          href='/pages/wishlist'
          aria-label='Wishlist'
          class='hidden lg:flex hover:opacity-70 transition-opacity duration-200 ease-out'
        >
          <i class='fa-solid fa-heart' aria-hidden='true'></i>
        </a>
        <button
          id='cart-icon-bubble'
          type='button'
          class='relative hover:opacity-70 transition-opacity duration-200 ease-out bg-transparent border-none p-0'
          aria-label='{{ 'templates.cart.cart' | t }}'
        >
          <i class='fa-solid fa-cart-shopping' aria-hidden='true'></i>
        </button>
        {% if shop.customer_accounts_enabled %}
          {% if customer %}
            <a
              href='{{ routes.account_url }}'
              aria-label='{{ 'customer.account_fallback' | t }}'
              class='hidden lg:flex hover:opacity-70 transition-opacity duration-200 ease-out'
            >
              <i class='fa-regular fa-user' aria-hidden='true'></i>
            </a>
          {% else %}
            <a
              href='{{ routes.account_login_url }}'
              aria-label='{{ 'customer.log_in' | t }}'
              class='hidden lg:flex hover:opacity-70 transition-opacity duration-200 ease-out'
            >
              <i class='fa-regular fa-user' aria-hidden='true'></i>
            </a>
          {% endif %}
        {% endif %}
        <button
          type='button'
          data-toggle-search
          aria-label='{{ 'general.search.search' | t }}'
          aria-expanded='false'
          aria-controls='HeaderSearchContainer'
          class='hidden lg:flex hover:opacity-70 transition-opacity duration-200 ease-out bg-transparent border-none p-0'
        >
          <i class='fa-solid fa-magnifying-glass' aria-hidden='true'></i>
        </button>
        {% if settings.social_instagram_link != blank %}
          <a
            href='https://instagram.com/graymattersnyc'
            target='_blank'
            aria-label='Instagram'
            class='hover:opacity-70 transition-opacity duration-200 ease-out'
          >
            <i class='fa-brands fa-instagram' aria-hidden='true'></i>
          </a>
        {% endif %}
      </div>
    </div>
  </div>
</header>
<!-- Mobile menu drawer -->
<div
  id='MobileMenu'
  class='fixed inset-0 z-[60] lg:hidden hidden opacity-0 pointer-events-none transition-opacity duration-300 ease-out'
  aria-hidden='true'
>
  <!-- overlay -->
  <button
    class='absolute inset-0 bg-black/50 opacity-0 transition-opacity duration-300 ease-out'
    data-close-mobile-menu
    data-menu-overlay
    aria-label='Chiudi menu'
  ></button>
  <!-- drawer -->
  <aside
    class='absolute left-0 top-0 h-full w-[285px] max-w-[85%] bg-gray-300 shadow-xl px-6 py-16 overflow-y-auto transition-transform duration-300 ease-out -translate-x-full'
    data-menu-drawer
  >
    <button class='absolute top-3 right-3 p-2' data-close-mobile-menu aria-label='Chiudi menu'>
      <i class='fa-solid fa-xmark text-xl' aria-hidden='true'></i>
    </button>
    {% render 'mobile-menu' %}
  </aside>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      var openBtn = document.querySelector('[data-open-mobile-menu]');
      var menu = document.getElementById('MobileMenu');
      var overlay = menu ? menu.querySelector('[data-menu-overlay]') : null;
      var drawer = menu ? menu.querySelector('[data-menu-drawer]') : null;
      var closers = menu ? menu.querySelectorAll('[data-close-mobile-menu]') : [];
      var TRANSITION_MS = 300;
      var siteHeader = document.querySelector('[data-site-header]');
      var HEADER_SCROLL_THRESHOLD = 0;

      function syncHeaderOffset() {
        if (!siteHeader) return;
        if (window.scrollY > HEADER_SCROLL_THRESHOLD) {
          if (siteHeader.classList.contains('top-8')) {
            siteHeader.classList.replace('top-8', 'top-0');
          } else {
            siteHeader.classList.add('top-0');
          }
        } else if (siteHeader.classList.contains('top-0')) {
          siteHeader.classList.replace('top-0', 'top-8');
        } else {
          siteHeader.classList.add('top-8');
        }
      }

      syncHeaderOffset();
      window.addEventListener('scroll', syncHeaderOffset);

      function openMenu() {
        if (!menu) return;
        // show container to allow transitions
        menu.classList.remove('hidden');
        // next frame to ensure transition applies
        requestAnimationFrame(function () {
          document.body.classList.add('overflow-hidden');
          menu.setAttribute('aria-hidden', 'false');
          menu.classList.remove('opacity-0', 'pointer-events-none');
          menu.classList.add('opacity-100');
          if (overlay) overlay.classList.remove('opacity-0');
          if (overlay) overlay.classList.add('opacity-100');
          if (drawer) drawer.classList.remove('-translate-x-full');
          if (drawer) drawer.classList.add('translate-x-0');
        });
      }
      function closeMenu() {
        if (!menu) return;
        // start transitions
        menu.classList.add('opacity-0');
        menu.classList.remove('opacity-100');
        if (overlay) overlay.classList.add('opacity-0');
        if (overlay) overlay.classList.remove('opacity-100');
        if (drawer) drawer.classList.add('-translate-x-full');
        if (drawer) drawer.classList.remove('translate-x-0');
        menu.setAttribute('aria-hidden', 'true');
        document.body.classList.remove('overflow-hidden');
        // after transition, hide and disable pointer events
        setTimeout(function () {
          menu.classList.add('hidden', 'pointer-events-none');
        }, TRANSITION_MS);
      }

      if (openBtn) openBtn.addEventListener('click', openMenu);
      if (closers && closers.forEach) {
        closers.forEach(function (el) {
          el.addEventListener('click', closeMenu);
        });
      }
      window.addEventListener('keydown', function (e) {
        if (e.key === 'Escape') {
          closeMenu();
          hideSearch();
        }
      });

      var searchToggle = document.querySelector('[data-toggle-search]');
      var searchContainer = document.getElementById('HeaderSearchContainer');
      var searchHideTimer = null;
      var SEARCH_TRANSITION_MS = 250;

      function showSearch() {
        if (!searchContainer) return;
        if (searchHideTimer) {
          clearTimeout(searchHideTimer);
          searchHideTimer = null;
        }
        searchContainer.classList.remove('hidden');
        requestAnimationFrame(function () {
          searchContainer.classList.add('is-search-active');
        });
        if (searchToggle) {
          searchToggle.setAttribute('aria-expanded', 'true');
        }
        var searchInput = searchContainer.querySelector('input[name="q"]');
        if (searchInput) {
          setTimeout(function () {
            searchInput.focus();
          }, 0);
        }
      }

      function hideSearch() {
        if (!searchContainer) return;
        if (searchContainer.classList.contains('hidden')) return;
        if (searchHideTimer) {
          clearTimeout(searchHideTimer);
          searchHideTimer = null;
        }
        searchContainer.classList.remove('is-search-active');
        if (searchToggle) {
          searchToggle.setAttribute('aria-expanded', 'false');
        }
        searchHideTimer = setTimeout(function () {
          searchContainer.classList.add('hidden');
        }, SEARCH_TRANSITION_MS);
      }

      if (searchToggle && searchContainer) {
        searchToggle.addEventListener('click', function (event) {
          event.preventDefault();
          var isHidden = searchContainer.classList.contains('hidden');
          if (isHidden) {
            showSearch();
          } else {
            hideSearch();
          }
        });

        document.addEventListener('click', function (event) {
          if (!searchContainer.contains(event.target) && (!searchToggle || !searchToggle.contains(event.target))) {
            hideSearch();
          }
        });
      }

      var searchCloseButtons = searchContainer ? searchContainer.querySelectorAll('[data-close-search]') : [];
      if (searchCloseButtons && searchCloseButtons.forEach) {
        searchCloseButtons.forEach(function (btn) {
          btn.addEventListener('click', function (event) {
            event.preventDefault();
            hideSearch();
          });
        });
      }
    });
  </script>
</div>
<div class='h-12'></div>
<div
  style='top:80px'
  id='HeaderSearchContainer'
  class='hidden container-search-form py-4 fixed  inset-x-0 z-40 bg-gray-200 shadow-lg px-4 relative'
>
  <button
    type='button'
    class='absolute top-4 right-4 p-2 text-gray-500 hover:text-gray-700 transition-colors duration-200 ease-out mr-4'
    data-close-search
    aria-label='Chiudi ricerca'
  >
    <i class='fa-solid fa-xmark text-xl' aria-hidden='true'></i>
  </button>
  <form
    action='{{ routes.search_url }}'
    method='get'
    class='search_form_top For_mobile_searxch'
    role='search'
  >
    <input type='hidden' name='type' value='product'>
    <i class='fa fa-search ic-down text-gray-300 ml-4'></i>
    <input
      class='search-header__input1 search__input1 form-control bg-transparent pl-6'
      type='search'
      name='q'
      id='search_input1'
      placeholder=''
      aria-label='{{ 'general.search.placeholder' | t }}'
    >
  </form>

  <div class='suggested-terms border-t border-gray-300 mt-5 pt-5 flex flex-row'>
    <h3 class='proxima-semi-bold uppercase tracking-widest pr-0 lg:pr-4'>Popular Searches</h3>
    <p>
      <span><a class='text-xs tracking-widest' href='{{ routes.search_url }}?q=bianco'>Bianco,</a></span>
      <span><a class='text-xs tracking-widest' href='{{ routes.search_url }}?q=cammello'>Cammello,</a></span>
      <span><a class='text-xs tracking-widest' href='{{ routes.search_url }}?q=classic'>Classic,</a></span>
      <span><a class='text-xs tracking-widest' href='{{ routes.search_url }}?q=color+block'>Color Block,</a></span>

      <span><a class='text-xs tracking-widest' href='{{ routes.search_url }}?q=gemma'>Gemma,</a></span>
      <span><a class='text-xs tracking-widest' href='{{ routes.search_url }}?q=emma'>Emma,</a></span>
      <span><a class='text-xs tracking-widest' href='{{ routes.search_url }}?q=clara'>Clara,</a></span>

      <span><a class='text-xs tracking-widest' href='{{ routes.search_url }}?q=egg'>Egg,</a></span>
      <span><a class='text-xs tracking-widest' href='{{ routes.search_url }}?q=junior'>Junior,</a></span>
      <span><a class='text-xs tracking-widest' href='{{ routes.search_url }}?q=micol'>Micol,</a></span>
      <span><a class='text-xs tracking-widest' href='{{ routes.search_url }}?q=mildred'>Mildred,</a></span>
      <span><a class='text-xs tracking-widest' href='{{ routes.search_url }}?q=nero'>Nero</a></span>
    </p>
  </div>
</div>
