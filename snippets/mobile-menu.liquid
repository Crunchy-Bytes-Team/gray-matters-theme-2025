<nav class='mobile-menu space-y-2' aria-label='Mobile menu'>
  <div class='border-b border-gray-200 pb-2' data-accordion-item>
    <button
      type='button'
      class='w-full flex items-center justify-between py-3 text-sm tracking-wider uppercase'
      data-accordion-button
      aria-controls='MobileMenuCollection'
      aria-expanded='false'
    >
      <span>Collection</span>
      <span class='inline-flex items-center justify-center w-5 h-5 text-black' data-accordion-icon>
        <span data-icon-plus>{{- 'icon-plus.svg' | inline_asset_content -}}</span>
        <span data-icon-minus class='hidden'>{{- 'icon-minus.svg' | inline_asset_content -}}</span>
      </span>
    </button>
    <div id='MobileMenuCollection' class='hidden pl-2 pb-3' data-accordion-panel>
      <ul class='space-y-2'>
        <li>
          <a
            href='{{ routes.all_products_collection_url }}'
            class='block py-1 proxima-reg text-sm tracking-wider uppercase hover:opacity-70 transition-opacity'
            >all</a
          >
        </li>
        <li>
          <a
            href='{{ routes.collections_url }}/the-latest'
            class='block py-1 proxima-reg text-sm tracking-wider uppercase hover:opacity-70 transition-opacity'
            >the latest</a
          >
        </li>
        <li>
          <a
            href='{{ routes.collections_url }}/classic'
            class='block py-1 proxima-reg text-sm tracking-wider uppercase hover:opacity-70 transition-opacity'
            >classic</a
          >
        </li>
        <li>
          <a
            href='{{ routes.collections_url }}/flats'
            class='block py-1 proxima-reg text-sm tracking-wider uppercase hover:opacity-70 transition-opacity'
            >flats</a
          >
        </li>
        <li>
          <a
            href='{{ routes.collections_url }}/boots'
            class='block py-1 proxima-reg text-sm tracking-wider uppercase hover:opacity-70 transition-opacity'
            >boots</a
          >
        </li>
      </ul>
    </div>
  </div>

  <div class='border-b border-gray-200 pb-2' data-accordion-item>
    <button
      type='button'
      class='w-full flex items-center justify-between py-3 text-sm tracking-wider uppercase'
      data-accordion-button
      aria-controls='MobileMenuLanguage'
      aria-expanded='false'
    >
      <span>Select language</span>
      <span class='inline-flex items-center justify-center w-5 h-5 text-black' data-accordion-icon>
        <span data-icon-plus>{{- 'icon-plus.svg' | inline_asset_content -}}</span>
        <span data-icon-minus class='hidden'>{{- 'icon-minus.svg' | inline_asset_content -}}</span>
      </span>
    </button>
    <div id='MobileMenuLanguage' class='hidden pl-2 pb-3' data-accordion-panel>
      {%- if localization.available_languages and localization.available_languages.size > 1 -%}
        <localization-form>
          {%- form 'localization', id: 'HeaderLanguageMobileForm', class: 'localization-form' -%}
            <div>
              <h2 class='visually-hidden' id='HeaderLanguageMobileLabel'>{{ 'localization.language_label' | t }}</h2>
              {%- render 'language-localization', localPosition: 'HeaderLanguageMobile' -%}
            </div>
          {%- endform -%}
        </localization-form>
      {%- else -%}
        <p class='text-sm text-gray-600'>{{ 'localization.language_label' | t }}</p>
      {%- endif -%}
    </div>
  </div>
</nav>

<script>
  (function () {
    var container = document.getElementById('MobileMenu');
    if (!container) return;
    var buttons = container.querySelectorAll('[data-accordion-button]');
    buttons.forEach(function (btn) {
      btn.addEventListener('click', function () {
        var panelId = btn.getAttribute('aria-controls');
        var panel = document.getElementById(panelId);
        if (!panel) return;
        var isHidden = panel.classList.contains('hidden');
        if (isHidden) {
          panel.classList.remove('hidden');
          btn.setAttribute('aria-expanded', 'true');
          var iconWrap = btn.querySelector('[data-accordion-icon]');
          if (iconWrap) {
            var plus = iconWrap.querySelector('[data-icon-plus]');
            var minus = iconWrap.querySelector('[data-icon-minus]');
            if (plus) plus.classList.add('hidden');
            if (minus) minus.classList.remove('hidden');
          }
        } else {
          panel.classList.add('hidden');
          btn.setAttribute('aria-expanded', 'false');
          var iconWrap = btn.querySelector('[data-accordion-icon]');
          if (iconWrap) {
            var plus = iconWrap.querySelector('[data-icon-plus]');
            var minus = iconWrap.querySelector('[data-icon-minus]');
            if (plus) plus.classList.remove('hidden');
            if (minus) minus.classList.add('hidden');
          }
        }
      });
    });
  })();
</script>
